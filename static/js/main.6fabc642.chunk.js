(this["webpackJsonptask-app"]=this["webpackJsonptask-app"]||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},40:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(16),s=n.n(a),i=(n(32),n(6)),o=n.n(i),u=n(12),l=n(9),d=n(14),p=(n(34),n(35),n(3)),f=function(){return Object(p.jsx)("div",{className:"header-container",children:Object(p.jsx)("div",{className:"title",children:"TODOS"})})},j=n(24),b=n.n(j),m=n(22),h=n.n(m),v=n(25),x=n.n(v),O=n(13),k=(n(50),n(38),function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,r=t.title,c=t.createTime,a={title:r,completed:!1,createTime:c},s=C.collection("users").doc(n).collection("todos"),e.prev=3,e.next=6,s.add(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Create task error: ",e.t0.massage);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()),g=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.collection("users").doc(t).collection("todos").doc(n).delete();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t,n,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=C.collection("users").doc(t).collection("todos").doc(n),console.log(c);try{c.update({completed:!r})}catch(a){console.log(a.message)}case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=C.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,c=t.email,a=new Date,e.prev=9,e.next=12,n.set({displayName:r,email:c,createdAt:a});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}(),C=O.a.initializeApp({apiKey:"AIzaSyA7vzleomr7Dz9wxVf8-LafhmteuQNCe-A",authDomain:"task-app-d76ee.firebaseapp.com",projectId:"task-app-d76ee",storageBucket:"task-app-d76ee.appspot.com",messagingSenderId:"338240483157",appId:"1:338240483157:web:e5058c8e10bb4d7d90c9dc"}).firestore(),N=O.a.auth(),S=new O.a.auth.GoogleAuthProvider;S.setCustomParameters({promt:"select_account"});var I=function(){return N.signInWithPopup(S)},D=(n(40),function(e){var t=e.title,n=e.completed,r=e.taskId,c=e.uid,a=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(c,r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(c,r,n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"item-container",children:[Object(p.jsx)("div",{className:"icon-container",onClick:s,children:n?Object(p.jsx)(h.a,{className:"completed"}):Object(p.jsx)(b.a,{})}),Object(p.jsx)("div",{className:"title ".concat(n?"completed":""),children:t}),Object(p.jsx)("div",{className:"del-container",children:Object(p.jsx)(x.a,{onClick:a})})]})}),T=function(e){var t=e.user,n=Object(r.useState)([]),c=Object(d.a)(n,2),a=c[0],s=c[1];Object(r.useEffect)((function(){C.collection("users").doc(t.id).collection("todos").orderBy("createTime","desc").onSnapshot((function(e){s(e.docs.map((function(e){return Object(u.a)({_id:e.id},e.data())})))}))}),[t]);var i=t.id;return Object(p.jsx)("div",{className:"items-list-container",children:a.map((function(e,t){var n=e.title,r=e.completed,c=e._id;return Object(p.jsx)(D,{title:n,completed:r,taskId:c,uid:i},t)}))})},A=n(26),P=(n(46),function(e){var t=e.handleChange,n=Object(A.a)(e,["handleChange"]);return Object(p.jsx)("div",{children:Object(p.jsx)("input",Object(u.a)({className:"custom-input",onChange:t},n))})}),z=(n(47),function(e){var t=e.currentUser;return Object(p.jsxs)("div",{className:"nav-container",children:[Object(p.jsx)("div",{className:"user",children:t&&t.displayName}),0===Object.keys(t).length?Object(p.jsx)("button",{onClick:I,children:"Sign In"}):Object(p.jsx)("button",{onClick:function(){return N.signOut()},children:"Sign Out"})]})});var B=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)({}),i=Object(d.a)(s,2),j=i[0],b=i[1];Object(r.useEffect)((function(){var e=N.onAuthStateChanged(function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,y(n);case 3:t.sent.onSnapshot((function(e){b(Object(u.a)({id:e.id},e.data()))})),t.next=8;break;case 7:b({});case 8:return t.abrupt("return",(function(){e()}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]);var m=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.t0=c,!e.t0){e.next=5;break}return e.next=5,k({uid:j.id,title:c,createTime:O.a.firestore.Timestamp.fromDate(new Date)});case 5:a("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(z,{currentUser:j}),Object(p.jsx)(f,{}),0!==Object.keys(j).length&&Object(p.jsxs)("div",{children:[Object(p.jsx)("form",{onSubmit:m,children:Object(p.jsx)(P,{name:"add-note",placeholder:"Create task",onChange:function(e){a(e.target.value)},value:c,type:"text"})}),Object(p.jsx)(T,{user:j})]})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(B,{})}),document.getElementById("root")),F()}},[[49,1,2]]]);
//# sourceMappingURL=main.6fabc642.chunk.js.map